name: Add packages

on:
  workflow_dispatch:

jobs:
  add-packages:
    runs-on: ubuntu-latest

    steps:
      - name: ðŸ”„ Checkout completo del repositorio
        uses: actions/checkout@v3
        with:
          fetch-depth: 0

      - name: ðŸ“¥ Descargar y descomprimir Paquetes.fuentes.zip desde Google Drive
        run: |
          pip install gdown
          gdown --id 1VjruFQxS_cxLOSTNCI-6eAWLiLBYSQ14 -O paquetes.zip
          mkdir temp_extract
          unzip -o paquetes.zip -d temp_extract
          mkdir -p .github/sources
          if [ $(ls -1 temp_extract | wc -l) -eq 1 ] && [ -d temp_extract/* ]; then
            mv temp_extract/*/* .github/sources/
          else
            mv temp_extract/* .github/sources/
          fi

      - name: ðŸ“‚ Mostrar estructura final
        run: |
          echo "Contenido de .github/sources:"
          ls -R .github/sources
