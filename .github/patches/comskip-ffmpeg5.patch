--- a/comskip.c
+++ b/comskip.c
@@ -1234,7 +1234,11 @@ static void video_packet_process(AVStream *st, ...)
     if (st->avg_frame_rate.num && st->avg_frame_rate.den)
         fps = av_q2d(st->avg_frame_rate);
     else
-        fps = 1.0 / (st->codec->ticks_per_frame * av_q2d(st->codec->time_base));
+#if LIBAVCODEC_VERSION_MAJOR >= 59
+        if (st->codecpar->framerate.num && st->codecpar->framerate.den)
+            fps = av_q2d(st->codecpar->framerate);
+        else
+            fps = 1.0 / av_q2d(st->time_base);
+#else
+        fps = 1.0 / (st->codec->ticks_per_frame * av_q2d(st->codec->time_base));
+#endif
 
     /* resto de la función… */
 }
@@ -1891,7 +1895,11 @@ static int stream_component_open(AVFormatContext *ic, int stream_index)
     codec = avcodec_find_decoder(avctx->codec_id);
     if (!codec)
         return -1;
-    avctx->ticks_per_frame = st->codec->ticks_per_frame;
+#if LIBAVCODEC_VERSION_MAJOR < 59
+    avctx->ticks_per_frame = st->codec->ticks_per_frame;
+#endif
     /* resto de la función… */
 }
@@ -2450,7 +2458,11 @@ static int file_open(const char *filename)
     if (st->avg_frame_rate.num && st->avg_frame_rate.den)
         fps = av_q2d(st->avg_frame_rate);
     else
-        fps = 1.0 / (st->codec->ticks_per_frame * av_q2d(st->codec->time_base));
+#if LIBAVCODEC_VERSION_MAJOR >= 59
+        if (st->codecpar->framerate.num && st->codecpar->framerate.den)
+            fps = av_q2d(st->codecpar->framerate);
+        else
+            fps = 1.0 / av_q2d(st->time_base);
+#else
+        fps = 1.0 / (st->codec->ticks_per_frame * av_q2d(st->codec->time_base));
+#endif
 
     /* resto de la función… */
 }

